Use Case 10 - MN Status Reports
-------------------------------

Author
  VDC TWG

Date
  - 20090925 Adding to use case description and documentation
  - 20090114 (TWG meeting).  Subsequent various modifications.

Version 
  Draft

Goal 
  Coordinating Node checks "liveness" of all Member Nodes - checks ping,
  service x, load, space, bandwidth, transaction rate, ...

Summary 

  As part of the infrastructure monitoring process, a CN checks on the
  "liveness" of all Member Nodes. This operation will be performed with
  moderate frequency (perhaps in the order of once every few minutes). The
  basic operation of pinging the MN to test for connectivity.
  


Actors
  CN, MN

Preconditions 

  - CNs are operational

  - MN is registered
  
Triggers

  - Timed interval

  - Registration change
 
Post Conditions

  - Status metadata is updated at CNs


.. figure:: images/10_interaction.png
   :width: 100%


..
  @startuml images/10_interaction.png
  !include ../plantuml.conf
    actor Admin
    participant "Admin" as app_admin << Application >>
    Admin -> app_admin
    participant "Server Authentication API" as c_srv_auth << Coordinating Node >>
    participant "Authentication API" as c_authenticate << Coordinating Node >>
    c_srv_auth -> c_authenticate: requestToken ()
    c_srv_auth <-- c_authenticate: token or failure
    participant "Server Authentication API" as m_authenticate << Member Node >>
    c_srv_auth -> m_authenticate: serviceRequest (token)
    participant "Verify API" as c_ver << Coordinating Node >>
    m_authenticate -> c_ver: verify (token)
    m_authenticate <-- c_ver: confirm or failure
    c_srv_auth <-- m_authenticate: ack or failure
    participant "State of Health API" as c_health << Coordinating Node >>
    participant "State of Health API" as m_health << Member Node >>
    c_health -> m_health: sohQuery (token, service)
    c_health <-- m_health: sohResponse
    app_admin <-- c_health: notify (adminID, nodeID, service)
  @enduml
  

.. raw:: pdf

   PageBreak
