<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.5: http://docutils.sourceforge.net/" />
<title>DataONE Architecture</title>
<style type="text/css">

/* Original content from: http://www.rexx.com/~dkuhlman/ */
/* Modified by Dave V. */
body {
  font: 90% 'Lucida Grande', Verdana, Geneva, Lucida, Arial, Helvetica, sans-serif;
  background: #ffffff;
  color: black;
  margin: 2em;
  padding: 2em;
}

a[href] {
  color: #436976;
  background-color: transparent;
}

a.toc-backref {
  text-decoration: none;
}

h1 a[href] {
  text-decoration: none;
  color: #003a6b;
  background-color: transparent;
}

a.strong {
  font-weight: bold;
}

img {
  margin: 0;
  border: 0;
}

p {
  margin: 0.5em 0 1em 0;
  line-height: 1.5em;
}
p a {
  text-decoration: underline;
}
p a:visited {
  color: purple;
  background-color: transparent;
}
p a:active {
  color: red;
  background-color: transparent;
}
a:hover {
  text-decoration: none;
}
p img {
  border: 0;
  margin: 0;
}

h1, h2, h3, h4, h5, h6 {
  color: #003a6b;
  background-color: transparent;
  font: 100% 'Lucida Grande', Verdana, Geneva, Lucida, Arial, Helvetica, sans-serif;
  margin: 0;
  padding-top: 0.5em;
}

h1 {
  font-size: 160%;
  margin-bottom: 0.5em;
  border-bottom: 1px solid #fcb100;
}
h2 {
  font-size: 140%;
  margin-bottom: 0.5em;
  border-bottom: 1px solid #aaa;
}
h3 {
  font-size: 130%;
  margin-bottom: 0.5em;
  text-decoration: underline;
}
h4 {
  font-size: 110%;
  font-weight: bold;
}
h5 {
  font-size: 100%;
  font-weight: bold;
}
h6 {
  font-size: 80%;
  font-weight: bold;
}

ul a, ol a {
  text-decoration: underline;
}

dt {
  font-weight: bold;
}
dt a {
  text-decoration: none;
}

dd {
  line-height: 1.5em;
  margin-bottom: 1em;
}

legend {
  background: #ffffff;
  padding: 0.5em;
}

form {
  margin: 0;
}


dl.form {
  margin: 0;
  padding: 1em;
}

dl.form dt {
  width: 30%;
  float: left;
  margin: 0;
  padding: 0 0.5em 0.5em 0;
  text-align: right;
}

input {
  font: 100% 'Lucida Grande', Verdana, Geneva, Lucida, Arial, Helvetica, sans-serif;
  color: black;
  background-color: white;
  vertical-align: middle;
}

abbr, acronym, .explain {
  color: black;
  background-color: transparent;
}

q, blockquote {
}

code, pre {
  font-family: monospace;
  font-size: 1.2em;
  display: block;
  padding: 10px;
  border: 1px solid #838183;
  background-color: #eee;
  color: #000;
  overflow: auto;
  margin: 0.5em 1em;
}

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

tt.docutils {
  background-color: #eeeeee;
}

</style>
<script src="https://www.google.com/jsapi" type="text/javascript"></script>
<script type="text/javascript">
  google.load('search', '1');
  google.setOnLoadCallback(function(){
    new google.search.CustomSearchControl('000172613306001554066:q47510enxzo').draw('cse');
  }, true);

</script>
</head>
<body>
<div class="header">
DataONE Architecture  -  20091019 21:31
<hr class="header"/>
</div>
<div class="document" id="dataone-architecture">
<div id="cse" style="float:right;width:30%;">Loading</div>
<h1 class="title">DataONE Architecture</h1>
<h2 class="subtitle" id="dataone-use-cases-and-apis">DataONE Use Cases and APIs</h2>

<p><strong>Change Log</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">20090927:</th><td class="field-body"><ul class="first simple">
<li>Split usecases into separate document</li>
<li>Added page breaks for rst2pdf</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">20090925:</th><td class="field-body"><ul class="first simple">
<li>Initial collation of all use cases into single document.</li>
<li>Recast all diagrams to interaction diagrams using PlantUML automated tools</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">20090924:</th><td class="field-body"><ul class="first last simple">
<li>Layout document structure, draft templates</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="auto-toc simple">
<li><a class="reference internal" href="#use-cases-overview" id="id33">1&nbsp;&nbsp;&nbsp;Use Cases Overview</a></li>
<li><a class="reference internal" href="#use-case-implementation-priority" id="id34">2&nbsp;&nbsp;&nbsp;Use Case Implementation Priority</a></li>
<li><a class="reference internal" href="#use-cases" id="id35">3&nbsp;&nbsp;&nbsp;Use Cases</a></li>
<li><a class="reference internal" href="#dataone-application-programming-interfaces" id="id36">4&nbsp;&nbsp;&nbsp;DataONE Application Programming Interfaces</a></li>
</ul>
</div>
<div class="section" id="use-cases-overview">
<h1><a class="toc-backref" href="#id33">1&nbsp;&nbsp;&nbsp;Use Cases Overview</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Date:</th><td class="field-body">20090924</td>
</tr>
</tbody>
</table>
<p>An important early part in the process of system architecture is identifying
the functional requirements that the resulting system should be able to
address. Use cases are helpful for this as they describe how actors (typically
entities external to the system) interact with system components. Interaction
diagrams help define the interfaces and messages transmitted between
components.</p>
<div class="note">
<p class="first admonition-title">Note</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">TODO:</th><td class="field-body">Architecture overview diagram</td>
</tr>
<tr class="field"><th class="field-name">TODO:</th><td class="field-body">Component diagram</td>
</tr>
<tr class="field"><th class="field-name">TODO:</th><td class="field-body">Broad categories of use cases</td>
</tr>
</tbody>
</table>
</div>
<div class="figure">
<img alt="images/dataone_components.png" src="images/dataone_components.png" />
</div>
<!-- @startuml images/dataone_components.png
  package "Coordinating Node" #EEEEEE
    component "Registration API" as CNregister
    component "Verify API" as CNverify
    component "CN Replication" as CNrepl
    component "MN Synchronization" as MNrepl
    component "Identity and Authentication" as CNIDAuth
    component "Authorization and Control" as CNaccesscontrol
    component "Search" as CNsearch
    component "CRUD" as CNcrud
    component "Health" as CNhealth
    component "Logging" as CNlogging
    component "Subscription" as CNsubscribe

  package "Member Node" #EEEEEE
    component "Replication" as repl
    component "Authentication" as MNauth
    component "Health" as MNhealth
    component "Capabilities" as MNcaps
    component "CRUD" as MNcrud
    component "Log" as MNlog

  package "Investigator Toolkit" #EEEEEE
    component client
    component admin


  CNIDAuth - - CNcrud
  CNIDAuth - - CNverify
  CNaccesscontrol - - CNcrud
  CNaccesscontrol - - CNverify
  CNcrud - - CNlogging
  CNcrud - - MNrepl
  CNcrud - - CNlogging
  CNsubscribe - - CNIDAuth
  MNrepl - - CNlogging
  CNsearch - - CNlogging
  CNsearch - - CNsubscribe
  CNsearch - - CNaccesscontrol
  CNregister - - CNlogging
  CNrepl - - CNrepl
  CNrepl - - CNlogging


  MNcaps - - CNregister
  repl - - MNrepl
  CNhealth - - MNhealth
  MNcrud - - CNcrud
  MNcrud - - CNverify
  MNcrud - - MNlog
  MNcrud - - MNrepl
  MNauth - - CNIDAuth
  MNauth - - MNauth
  MNauth - - CNverify
  repl - - repl
  MNlog - - MNrepl


  client - - CNcrud
  client - - CNsearch
  client - - MNauth
  client - - CNIDAuth
  client - - CNsubscribe
  client - - CNaccesscontrol
  admin ..|> client
  admin - - CNIDAuth
  admin - - CNhealth
  admin - - MNhealth


@enduml -->
<!-- @startuml images/cn_components_x.png
  package "Coordinating Node" #EEEEEE
    component "Registration API" as CNregister
    component "Verify API" as CNverify
    component "CN Replication" as CNrepl
    component "MN Synchronization" as MNrepl
    component "Identity and Authentication" as CNIDAuth
    component "Authorization and Control" as CNaccesscontrol
    component "Search" as CNsearch
    component "CRUD" as CNcrud
    component "Health" as CNhealth
    component "Logging" as CNlogging
    component "Subscription" as CNsubscribe
    component "System Metadata" as CNsysmeta
    component "Experiment Metadata" as CNexpmeta
    component "Metadata Parser" as CNparser

CNcrud - -> CNexpmeta: write
CNcrud - - CNlogging
CNexpmeta - - CNparser
CNparser - - CNsysmeta
CNsearch - - CNsubscribe
CNsearch - - CNaccesscontrol
CNsearch - - CNlogging
CNaccesscontrol - - CNverify
CNverify - - CNIDAuth
CNsubscribe - - CNIDAuth
CNIDAuth - - CNcrud
CNcrud - - CNrepl
CNcrud - - MNrepl
CNrepl - - CNrepl
CNregister - - CNlogging
CNregister - - CNsysmeta
CNhealth - - CNsysmeta
@enduml -->
<div class="section" id="use-case-layout">
<h2>1.1&nbsp;&nbsp;&nbsp;Use Case Layout</h2>
<p>Each use case document is structured following a common template which
includes the following elements.</p>
<dl class="docutils">
<dt>Author</dt>
<dd>Who generated the use case.  This will usually be &quot;VDC TWG&quot;.</dd>
<dt>Date</dt>
<dd>Date the use case was identified and known subsequent modifications.</dd>
<dt>Version</dt>
<dd>One of &quot;Draft&quot;, &quot;Review&quot;, &quot;Published&quot;</dd>
<dt>Goal</dt>
<dd>Brief description of what is intended with the use case.</dd>
<dt>Summary</dt>
<dd>An overview of the use case which includes the goal and major actors.</dd>
<dt>Use case diagram</dt>
<dd>A diagram representation of the use case, somewhat following the UML.</dd>
<dt>Sequence diagram</dt>
<dd>A sequence diagram that shows the operations involved in addressing the use
case.</dd>
<dt>Actors</dt>
<dd>The participants in the use case - includes people and systems.</dd>
<dt>Preconditions</dt>
<dd>The conditions that must exist for the use case. For example, a particular
use case may only be valid if the use has been authenticated.</dd>
<dt>Triggers</dt>
<dd>Describes the even that causes the use case to be initiated.</dd>
<dt>Postconditions</dt>
<dd>The state of the system after the use case - what conditions are true after
the use case is completed.</dd>
<dt>Notes</dt>
<dd>Miscellaneous notes and discussion items that can't be placed in the various
categories.  Comments should be annotated with time and author.</dd>
</dl>
<div class="note">
<p class="first admonition-title">Note</p>
<p class="last">The diagrams presented in these documents are all generated using the
excellent <a class="reference external" href="http://plantuml.sourceforge.net">PlantUML</a> tool developed by Arnaud Roques.  PlantUML has saved us
many hours of work generating these diagrams.</p>
</div>
</div>
</div>
<div class="section" id="use-case-implementation-priority">
<h1><a class="toc-backref" href="#id34">2&nbsp;&nbsp;&nbsp;Use Case Implementation Priority</a></h1>
<p>Prioritizing system implementation to address the use cases involves several
factors including:</p>
<ul class="simple">
<li><em>Vision of the project</em>. The system is being designed with some overall goals
described by the vision of the project proposal.</li>
<li><em>Requirements of the community</em>. The stakeholders that comprise the user and
participant community quite likely has some opinion on functionalities of
the system that are important to them. If these are not properly addressed,
then the resulting system may appear as a failure to them.</li>
<li><em>Requirements of the sponsor</em>. The sponsor has laid out goals in the RFP that
the project is responding to and also in the final agreement for conducting the work.</li>
<li><em>Dependencies between use cases</em>. Implementation of functionality to address
some use cases will require implementation of some components not directly
specific in a use case.</li>
<li><em>Resources available for implementation</em>. Some use cases may be identified as
high priority, but would require resources that would prevent implementation
of a number of other lower priority features.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">TODO:</th><td class="field-body">Insert an initial prioritization of the use cases.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="use-cases">
<h1><a class="toc-backref" href="#id35">3&nbsp;&nbsp;&nbsp;Use Cases</a></h1>
<div class="contents local topic" id="id1">
<p class="topic-title first">Table of Contents</p>
<ul class="auto-toc simple">
<li><a class="reference internal" href="#use-case-1-crud-read" id="id37">3.1&nbsp;&nbsp;&nbsp;Use Case 1 - CRUD Read()</a></li>
<li><a class="reference internal" href="#use-case-02-list-guids-by-search" id="id38">3.2&nbsp;&nbsp;&nbsp;Use Case 02 - List GUIDs By Search</a></li>
<li><a class="reference internal" href="#use-case-03-register-mn" id="id39">3.3&nbsp;&nbsp;&nbsp;Use Case 03 - Register MN</a></li>
<li><a class="reference internal" href="#use-case-04-crud-create-update-delete" id="id40">3.4&nbsp;&nbsp;&nbsp;Use Case 04 - CRUD (Create, Update Delete)</a></li>
<li><a class="reference internal" href="#use-case-05-crud-create-update-delete" id="id41">3.5&nbsp;&nbsp;&nbsp;Use Case 05 - CRUD (Create, Update Delete)</a></li>
<li><a class="reference internal" href="#use-case-06-mn-synchronize" id="id42">3.6&nbsp;&nbsp;&nbsp;Use Case 06 - MN Synchronize</a></li>
<li><a class="reference internal" href="#use-case-07-cn-batch-upload" id="id43">3.7&nbsp;&nbsp;&nbsp;Use Case 07 - CN Batch Upload</a></li>
<li><a class="reference internal" href="#use-case-08-replication-policy-communication" id="id44">3.8&nbsp;&nbsp;&nbsp;Use Case 08 - Replication Policy Communication</a></li>
<li><a class="reference internal" href="#use-case-09-replicate-mn-to-mn" id="id45">3.9&nbsp;&nbsp;&nbsp;Use Case 09 - Replicate MN to MN</a></li>
<li><a class="reference internal" href="#use-case-10-mn-status-reports" id="id46">3.10&nbsp;&nbsp;&nbsp;Use Case 10 - MN Status Reports</a></li>
<li><a class="reference internal" href="#use-case-11-crud-workflow-objects" id="id47">3.11&nbsp;&nbsp;&nbsp;Use Case 11 - CRUD Workflow Objects</a></li>
<li><a class="reference internal" href="#use-case-12-user-authentication" id="id48">3.12&nbsp;&nbsp;&nbsp;Use Case 12 - User Authentication</a></li>
<li><a class="reference internal" href="#use-case-13-user-authorization" id="id49">3.13&nbsp;&nbsp;&nbsp;Use Case 13 - User Authorization</a></li>
<li><a class="reference internal" href="#use-case-14-system-authentication-and-authorization" id="id50">3.14&nbsp;&nbsp;&nbsp;Use Case 14 - System Authentication and Authorization</a></li>
<li><a class="reference internal" href="#use-case-15-account-management" id="id51">3.15&nbsp;&nbsp;&nbsp;Use Case 15 - Account Management</a></li>
<li><a class="reference internal" href="#use-case-16-log-crud-operations" id="id52">3.16&nbsp;&nbsp;&nbsp;Use Case 16 - Log CRUD Operations</a></li>
<li><a class="reference internal" href="#use-case-17-crud-logs-aggregated-at-cns" id="id53">3.17&nbsp;&nbsp;&nbsp;Use Case 17 - CRUD Logs Aggregated at CNs</a></li>
<li><a class="reference internal" href="#use-case-18-mn-retrieve-aggregated-logs" id="id54">3.18&nbsp;&nbsp;&nbsp;Use Case 18 - MN Retrieve Aggregated Logs</a></li>
<li><a class="reference internal" href="#use-case-19-retrieve-object-download-summary" id="id55">3.19&nbsp;&nbsp;&nbsp;Use Case 19 - Retrieve Object Download Summary</a></li>
<li><a class="reference internal" href="#use-case-20-owner-retrieve-aggregate-logs" id="id56">3.20&nbsp;&nbsp;&nbsp;Use Case 20 - Owner Retrieve Aggregate Logs</a></li>
<li><a class="reference internal" href="#use-case-21-owner-subscribe-to-crud-operations" id="id57">3.21&nbsp;&nbsp;&nbsp;Use Case 21 - Owner Subscribe to CRUD Operations</a></li>
<li><a class="reference internal" href="#use-case-22-link-citation-report-for-owner" id="id58">3.22&nbsp;&nbsp;&nbsp;Use Case 22 - Link/Citation Report for Owner</a></li>
<li><a class="reference internal" href="#use-case-23-owner-expunge-content" id="id59">3.23&nbsp;&nbsp;&nbsp;Use Case 23 - Owner Expunge Content</a></li>
<li><a class="reference internal" href="#use-case-24-mns-and-cns-support-transactions" id="id60">3.24&nbsp;&nbsp;&nbsp;Use Case 24 - MNs and CNs Support Transactions</a></li>
<li><a class="reference internal" href="#use-case-25-detect-damaged-content" id="id61">3.25&nbsp;&nbsp;&nbsp;Use Case 25 - Detect Damaged Content</a></li>
<li><a class="reference internal" href="#use-case-26-data-quality-checks" id="id62">3.26&nbsp;&nbsp;&nbsp;Use Case 26 - Data Quality Checks</a></li>
<li><a class="reference internal" href="#use-case-27-metadata-version-migration" id="id63">3.27&nbsp;&nbsp;&nbsp;Use Case 27 - Metadata Version Migration</a></li>
<li><a class="reference internal" href="#use-case-28-derived-product-original-change-notification" id="id64">3.28&nbsp;&nbsp;&nbsp;Use Case 28 - Derived Product Original Change Notification</a></li>
<li><a class="reference internal" href="#use-case-29-cn-load-balancing" id="id65">3.29&nbsp;&nbsp;&nbsp;Use Case 29 - CN Load Balancing</a></li>
<li><a class="reference internal" href="#use-case-30-mn-outage-notification" id="id66">3.30&nbsp;&nbsp;&nbsp;Use Case 30 - MN Outage Notification</a></li>
<li><a class="reference internal" href="#use-case-31-manage-access-policies" id="id67">3.31&nbsp;&nbsp;&nbsp;Use Case 31 - Manage Access Policies</a></li>
<li><a class="reference internal" href="#use-case-32-transfer-object-ownership" id="id68">3.32&nbsp;&nbsp;&nbsp;Use Case 32 - Transfer Object Ownership</a></li>
<li><a class="reference internal" href="#use-case-33-search-for-data" id="id69">3.33&nbsp;&nbsp;&nbsp;Use Case 33 - Search for Data</a></li>
<li><a class="reference internal" href="#use-case-34-cns-support-other-discovery-mechanisms-e-g-google" id="id70">3.34&nbsp;&nbsp;&nbsp;Use Case 34 - CNs Support Other Discovery Mechanisms (e.g. Google)</a></li>
</ul>
</div>
<div class="section" id="use-case-1-crud-read">
<span id="uc01"></span><h2><a class="toc-backref" href="#id37">3.1&nbsp;&nbsp;&nbsp;Use Case 1 - CRUD Read()</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20091006 Added use case diagram</li>
<li>20090924 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>Get object identified by GUID (authenticated or not, notify subscriber of access).</dd>
<dt>Summary</dt>
<dd><p class="first">A client has an identifier for some object within the DataONE system and is
retrieving the referenced object. The DataONE system must resolve the
identifier and return the object bytes after checking that the user has read
privileges on the object.</p>
<p class="last">Watchers (subscribers) of the object are notified of the retrieval (what are
they notified of?).</p>
</dd>
<dt>Actors</dt>
<dd><ul class="first last simple">
<li>Client requesting object</li>
<li>Coordinating Node</li>
<li>Member Node</li>
</ul>
</dd>
<dt>Preconditions</dt>
<dd><ul class="first last simple">
<li>Client has authenticated to at the desired level (e.g. client may not have
authenticated, so access might be anonymous), and so an <tt class="docutils literal"><span class="pre">auth_token</span> <span class="pre">|</span>
<span class="pre">None</span></tt> is available.</li>
</ul>
</dd>
<dt>Triggers</dt>
<dd><ul class="first last simple">
<li>An object is requested from the DataONE system.</li>
</ul>
</dd>
<dt>Post Conditions</dt>
<dd><ul class="first last simple">
<li>The client has a copy of the object bytes (or an error message in the case
of failure)</li>
<li>The log is updated with the results of the operation</li>
<li>Watchers perform their processing</li>
</ul>
</dd>
</dl>
<p><strong>Notes</strong></p>
<ol class="arabic simple">
<li>For the GET operation, the coordinating node does not need to check access,
because the member node will do this check before delivering the results.</li>
<li>For the GET operation, should isAuth() be performed only by CNs? Relying on
the MN system metadata requires trusted implementation of the MN system and
consistency of system metadata across all MNs (which will be the case, though
with uncertain latency). Requiring all isAuth() operations to be performed by
CNs will increase trust in the operation (assuming the operation is not
spoofed by a MN) though will increase load on CNs.</li>
<li>Data sent to watchers might include: timestamp, object identifier, user id,
IP of client.</li>
</ol>
<div class="figure">
<img alt="UseCases/images/01_uc.png" src="UseCases/images/01_uc.png" />
<p class="caption">Use case diagram showing actors and components involved in this action.</p>
</div>
<div class="figure">
<img alt="UseCases/images/01_interaction.png" src="UseCases/images/01_interaction.png" />
<p class="caption">Sequence diagram for retrieving an object from DataONE.</p>
</div>
<!-- This block defines the use case diagram referenced above
@startuml images/01_uc.png
actor "User" as client
usecase "12. Authentication" as authen
note top of authen
 Authentication may be provided
 by an external service
 such as CILogon
end note

package "DataONE"
component "Coordinating Node" as CN
component "Member Node" as MN
usecase "13. Authorization" as author
usecase "01. Get Object" as GET
client - - GET
CN - - GET
MN - - GET
GET ..> author: <<includes>>
GET ..> authen: <<includes>>
@enduml -->
<!-- This block defines the interaction diagram referenced above.
@startuml images/01_interaction.png
actor User
participant "Client" as app_client << Application >>
User -> app_client

participant "CRUD API" as c_crud << Coordinating Node >>
activate c_crud
app_client -> c_crud: resolve(GUID, auth_token)
participant "Authorization API" as c_authorize << Coordinating Node >>
c_crud -> c_authorize: isAuth(auth_token, GUID)
participant "Verify API" as c_ver << Coordinating Node >>
c_authorize -> c_ver: isValidToken (token)
c_authorize <- - c_ver: T or F
c_crud <- - c_authorize: T or F
app_client <- - c_crud: handle_list
deactivate c_crud

participant "CRUD API" as m_crud << Member Node >>
activate m_crud
app_client -> m_crud: get(auth_token, handle)
participant "Server Authentication API" as m_authenticate << Member Node >>
m_crud -> m_authenticate: isAuth(auth_token, GUID)
m_crud <- - m_authenticate: T or F
m_crud -> m_crud: log(get, UserID, GUID)
app_client <- - m_crud: object or unauth or doesNotExist
deactivate m_crud
@enduml -->
</div>
<div class="section" id="use-case-02-list-guids-by-search">
<span id="uc02"></span><h2><a class="toc-backref" href="#id38">3.2&nbsp;&nbsp;&nbsp;Use Case 02 - List GUIDs By Search</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20090927 Provided more detail to use case</li>
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>Get list of GUIDs from metadata search (anon and authenticated).</dd>
<dt>Summary</dt>
<dd><p class="first">A user performs a search against the DataONE system and receives a list of
object identifiers (GUIDs) that match the search criteria. The list of GUIDs
is filtered such that only objects for which the user has read permission
will be returned.</p>
<p class="last">This use case assumes that the search is being performed by submitting a
query against a CN.</p>
</dd>
<dt>Actors</dt>
<dd><ul class="first last simple">
<li>Client performing search operation</li>
<li>Coordinating Node</li>
</ul>
</dd>
<dt>Preconditions</dt>
<dd><ul class="first last simple">
<li>Client has authenticated to at the desired level (e.g. client may not have
authenticated, so access might be anonymous).</li>
</ul>
</dd>
<dt>Triggers</dt>
<dd><ul class="first last simple">
<li>A search is performed against the DataONE system</li>
</ul>
</dd>
<dt>Post Conditions</dt>
<dd><ul class="first last simple">
<li>The client has a list of GUIDs for which they have permission to read and
match the supplied query, or an error message if the query was invalid.</li>
<li>The log is updated with the request</li>
</ul>
</dd>
</dl>
<p><strong>Notes</strong></p>
<ul>
<li><p class="first">lots of stuff buried in query. What information/interface is needed for
resolution/expansion of the query? For example a particular user may be
identified with a particular community which uses a particular ontology.
Where are things like ontologies maintained and where are the interfaces
between these and searches maintained? Searches need to be able to respond
to the dynamic nature of domain ontologies. Does the ontology need to have
authorization tied to it? A use case would be an ontology which is under
development and not ready for general distribution. Another case might be
where the ontology contains representations of human subject information,
meaning that &quot;cancer survivors&quot; includes this list of people. Or where the
ontology provides geospatial information about restricted information
(locations of USFS FIA plots). Similar issues apply to T&amp;E species
information.</p>
</li>
<li><p class="first">Group structure representation: A user is a member of zero to many groups,
authorization may be carried with that group membership. This is down in the
verify API, which needs to take into account group membership and group
permission inheritance. Question: What is the resolution for conflicting
access permissions?</p>
</li>
<li><p class="first">Q. Can a query be done at a member node? The diagram implies that the query is
only done at a coordinating node. A member node may have a subset (or the
full set) of metadata and the user may wish to do the search only at a
member node, knowing that the subset is restricted to data relevant to a
community of practice.</p>
<p>A. First iteration will provide query service on CNs, though nothing to
prevent MNs implementing query as well.</p>
</li>
<li><p class="first">Where is the filtering done for the results, in terms of when does the
result set get filtered to those which the user can see?</p>
<p>Q. Does the model allow the query service to do two searches and union the
results? The first query might be against the set of records known to be
publicly readable, with a follow-on query against the set of records known
to have restricted access. Is this envisioning the query service generating
a set of results (against the restricted records) and passing that list to
the authorization API, or is this envisioning a one by one situation. Or
does the authorization API pass back to the query service the list of
records that the user is authorized to see, and that gets anded with the
result set.</p>
<p>A. The resultset is a list of GUIDs that needs to be vetted for read access.
Hence query results can be merged (union) or joined as the output from such
operations is always a list of GUIDs that will be vetted for read access.</p>
</li>
<li><p class="first">How distributed is the database of users and their authorization records?</p>
<p>Q. Does the coordinating node have to know all authorization records, with that
being replicated? Or is some amount of the authorization maintained by (for
example) the &quot;owning&quot; member node and the search system may need to contact
multiple authorization authorities for the records in a particular result
set? It also implies that if the authorization information is at the
coordinating node, that the authorization authority needs a means to
validate the replicated authorization information to ensure that the info at
the cn is up-to-date.</p>
<p>A. One scenario is that all authorization information is stored in the
system metadata with each object. Then authorization can be performed by MNs
or CNs.</p>
</li>
<li><p class="first">Q. Why does step 4 need to validate the token, given that the token was
generated in step 2?</p>
<p>A. This is normal security validation of all user inputs once those have
gone out of the control of the issuing service. Also applies to cases where
tokens have a specific lifetime, and the token may be valid, but expired.
Authorization token lifetimes are important for both interactive sessions
and for cases like workflows, where the session may run for days.</p>
</li>
<li><p class="first">What logging level is required for the operation? Should the search appear
as a hit against each object? Just log the query (and perhaps who did it)?</p>
</li>
</ul>
<div class="figure">
<img alt="useCases/images/02_uc.png" src="useCases/images/02_uc.png" />
</div>
<div class="figure">
<img alt="UseCases/images/02_interaction.png" src="UseCases/images/02_interaction.png" />
<p class="caption">Client retrieves a list of GUIDs resulting from a metadata search.</p>
</div>
<!-- @startuml images/02_uc.png
actor User
usecase "12. Authentication" as authen

package "DataONE"
 component "Coordinating Node" as CN
 component "Member Node" as MN
 usecase "13. Authorization" as author
 usecase "02. Search Metadata" as SEARCH
 User - - SEARCH
 CN - - SEARCH
 MN - - SEARCH
 SEARCH ..> author: <<includes>>
 SEARCH ..> authen: <<includes>>
@enduml -->
<!-- @startuml images/02_interaction.png
actor User
participant "Client" as app_client << Application >>
User -> app_client

participant "Query API" as c_query << Coordinating Node >>
activate c_query
app_client -> c_query: query(auth_token, query)
note right of c_query
The query response is a list of GUIDS.
Each GUID needs to be checked for read
access by the auth_token.
end note
participant "Authorization API" as c_authorize << Coordinating Node >>
c_query -> c_authorize: isAuth(auth_token, resultset)
participant "Verify API" as c_ver << Coordinating Node >>
c_authorize -> c_ver: isValidToken (token)
c_authorize <- - c_ver: T or F
c_query <- - c_authorize: T or F
app_client <- - c_query: resultset
deactivate c_query
@enduml -->
</div>
<div class="section" id="use-case-03-register-mn">
<span id="uc03"></span><h2><a class="toc-backref" href="#id39">3.3&nbsp;&nbsp;&nbsp;Use Case 03 - Register MN</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20090927 More detail added to use case description</li>
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>Register a new Member Node.</dd>
<dt>Summary</dt>
<dd><p class="first">This use case describes the technical process for addition of a new member
node (MN) to to the DataONE infrastructure. It is assumed that the
appropriate social contracts have been formed and the MN is operational,
ready to be connected.</p>
<p class="last">The MN is identified by a URL which is the service endpoint. A DataONE
administrator adds the MN URL to the MN registry. A CN retrieves the
registration request from the message queue and queries the MN for
capabilities, then verifies those capabilities match what was advertised. If
everything is OK, the MN is made a live member of DataONE and replication of
content on the MN is scheduled. The new MN also becomes a receiver for
content replicated from other MNs.</p>
</dd>
<dt>Actors</dt>
<dd>MN, CN, Administrator</dd>
<dt>Preconditions</dt>
<dd><ul class="first last simple">
<li>The MN is operational</li>
<li>There is an agreement between the DataONE operators and the MN operator
that the MN is to be added to DataONE</li>
<li>The CNs are ready for receiving MN registrations</li>
</ul>
</dd>
<dt>Triggers</dt>
<dd><ul class="first last simple">
<li>A new Member Node is ready to be brought online and a DataONE
administrator initiates the process.</li>
</ul>
</dd>
<dt>Post Conditions</dt>
<dd><ul class="first last simple">
<li>The new MN operates as part of the DataONE infrastructure</li>
<li>DataONE infrastructure resources are incremented by the amount available
at the new MN</li>
<li>The operation outcomes are logged</li>
<li>Synchronization of the MN commences as per scheduled operation</li>
<li>Synchronize capabilities metadata across CNs</li>
<li>Notify MN administrators of operation status (email?)</li>
<li>The new MN is added to CN list of targets for replication</li>
</ul>
</dd>
</dl>
<p><strong>Notes</strong></p>
<ul>
<li><p class="first">Specify default replication policies</p>
</li>
<li><p class="first">Also check for version updates</p>
</li>
<li><p class="first">Should new nodes be registered with specified trust levels?</p>
</li>
<li><p class="first">Are there different levels of trust for member nodes?</p>
</li>
<li><p class="first">Data providers that use acceptable services can still be discovered and
accessed without registering in the DataONE registry (Conflicting, as
someone has to register it).</p>
<p>However, a MN that has not registered but does expose DataONE services is
not part of the DataONE infrastructure and so does not participate in
replication or other DataONE services.</p>
</li>
<li><p class="first">Allow service providers to register their services, (such as data extraction
services) (ala GEOSS), but include mapping to higher semantic model</p>
</li>
<li><p class="first">For well known services, registration system must be able to describe
constraints (e.g., allowable inputs, outputs, algorithms that can be
specified)</p>
</li>
<li><p class="first">Services can be parameterized</p>
</li>
<li><p class="first">Member node should be able to request the coordinating node to re-validate
its capabilities list.</p>
</li>
</ul>
<div class="figure">
<img alt="UseCases/images/03_uc.png" src="UseCases/images/03_uc.png" />
</div>
<!-- @startuml images/03_uc.png
actor "User" as client
usecase "12. Authentication" as authen

package "DataONE"
  actor "Administrator" as admin
  admin ..|> client
  component "Coordinating Node" as CN
  component "Member Node" as MN
  usecase "13. Authorization" as author
  usecase "03. Register MN" as register
  admin - - register
  CN - - register
  MN - - register
  register ..> author: <<includes>>
  register ..> authen: <<includes>>
@enduml -->
<hr class="docutils" />
<div class="figure">
<img alt="UseCases/images/03_interaction.png" src="UseCases/images/03_interaction.png" />
</div>
<!-- @startuml images/03_interaction.png
actor Admin
participant "Admin" as app_admin << Application >>
Admin -> app_admin
note right
  Assume admin authority for node registration.
end note

participant "Register API" as c_reg << Coordinating Node >>
activate c_reg
app_admin -> c_reg: register (auth_token, capabilitiesURL)
participant "Capabilities API" as m_cap << Member Node >>
c_reg -> m_cap: getCapabilities ()
c_reg <- - m_cap: capabilities
c_reg -> c_reg: verifyCapabilities ()
note right
 Assume capabilities stored as any other metadata.
end note
c_reg -> c_reg: addNodeCapabilities ()
c_reg -> c_reg: scheduleSynch ()
note right
 Harvest process occurs asynchronously.
 Separate use case.
end note
app_admin <- - c_reg: ack or fail
deactivate c_reg
@enduml -->
</div>
<div class="section" id="use-case-04-crud-create-update-delete">
<span id="uc04"></span><h2><a class="toc-backref" href="#id40">3.4&nbsp;&nbsp;&nbsp;Use Case 04 - CRUD (Create, Update Delete)</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20090929 Filling out details</li>
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>Create, update or delete metadata record on a Member Node.</dd>
<dt>Summary</dt>
<dd><p class="first">A user is creating a new metadata record on a Member Node (MN). The
mechanism by which the user does this is out of scope for the DataONE
system, so this use case continues from the point where a new Data Package
is present on the MN.</p>
<p>The metadata is retrieved by the CN using a pull mechanism (CN requests
content from the MN).</p>
<p class="last">The availability of new content on a MN is indicated by a flag in the
response to a ping() message issued by a CN. The CN then retrieves a list of
changes from the MN and for each change, retrieves the experiment metadata,
stores it and generates a search metadata document by extracting content
from the experiment metadata. The changes to the CN (stored experiment
metadata, update search metadata) are replicated to the other CNs (Use Case
###). The CN schedules replication of the data package across other MNs
(<a class="reference internal" href="#uc06">Use Case 06</a>).</p>
</dd>
</dl>
<dl class="docutils">
<dt>Actors</dt>
<dd>Member Node, additional Member Nodes, Coordinating Nodes</dd>
</dl>
<p>Preconditions</p>
<blockquote>
<ul class="simple">
<li>Use is authenticated and so client application has an auth_token for the process.</li>
<li>DataONE system operational</li>
<li>MN is registered and is monitored</li>
</ul>
</blockquote>
<p>Triggers</p>
<blockquote>
<ul class="simple">
<li>New data package is present on Member Node</li>
<li>An existing data package is modified on a Member Node</li>
<li>A data package is deleted from a Member Node</li>
</ul>
</blockquote>
<p>Post Conditions</p>
<blockquote>
<ul class="simple">
<li>New data package is replicated across MNs</li>
<li>Search metadata is updated</li>
<li>Operation recorded in logs</li>
<li>CN update of search metadata</li>
<li>CN replication of metadata</li>
<li>Watchers notified of change</li>
</ul>
</blockquote>
<p><strong>Notes</strong></p>
<ul class="simple">
<li>Are IDs are pegged to versions? If so, update might differ more radically
from create.</li>
<li>If delete is a metadata operation only, then will be very similar to update.
But if it is a physical operation, it becomes more complex. Will there be an
archival copy? Will member nodes that hold replicas be &quot;forced&quot; to destroy
the replicas?</li>
<li>Is submit from a member node a push or pull?</li>
<li>Should queuing of a submission within a member node be required for success?
(We assume yes, to guarantee replication of submissions).</li>
<li>Can data packages be deleted or modified?</li>
</ul>
<div class="figure">
<img alt="UseCases/images/04_uc.png" src="UseCases/images/04_uc.png" />
</div>
<!-- This block defines the use case diagram referenced above
@startuml images/04_uc.png
actor "User" as client
usecase "12. Authentication" as authen

package "DataONE"
  component "Coordinating Node" as CN
  component "Member Node" as MN
  usecase "13. Authorization" as author
  usecase "04. Create Object" as create
  usecase "06. MN Synchronize" as mn_sync
  client - - create
  CN - - create
  MN - - create
  create ..> author: <<includes>>
  create ..> authen: <<includes>>
  create ..> mn_sync: <<includes>>
@enduml -->
<hr class="docutils" />
<div class="figure">
<img alt="UseCases/images/04_interaction.png" src="UseCases/images/04_interaction.png" />
<p class="caption">Create, update, delete, search metadata or data object in Member Node.</p>
</div>
<!-- @startuml images/04_interaction.png
Actor User
participant "Client" as app_client << Application >>
User -> app_client

participant "CRUD API" as m_crud << Member Node >>
app_client -> m_crud: create(auth_token, dataPackage)
activate m_crud
participant "CRUD API" as c_crud << Coordinating Node >>
  m_crud -> c_crud: validateGUID(GUID)
  m_crud <- - c_crud: GUID
  m_crud -> m_crud: store()
deactivate m_crud

participant "State of Health API" as c_health << Coordinating Node >>
c_health -> m_crud: ping()
activate c_health
  c_health <- - m_crud: [ACK, NewData]
participant "Synchronization API" as c_sync << Coordinating Node >>
  c_health -> c_sync: scheduleSynch(MN_ID)
deactivate c_health
@enduml -->
</div>
<div class="section" id="use-case-05-crud-create-update-delete">
<span id="uc05"></span><h2><a class="toc-backref" href="#id41">3.5&nbsp;&nbsp;&nbsp;Use Case 05 - CRUD (Create, Update Delete)</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>Create/Update/Delete data object in Member Node.</dd>
<dt>Summary</dt>
<dd>This is a dupe of <a class="reference internal" href="#uc04">UC04</a> for now. May split out the update and delete
portions to different use cases at some point in the future.</dd>
<dt>Actors</dt>
<dd>xxx</dd>
<dt>Preconditions</dt>
<dd>xxx</dd>
<dt>Triggers</dt>
<dd>xxx</dd>
<dt>Post Conditions</dt>
<dd>xxx</dd>
</dl>
<div class="section" id="notes">
<h3>3.5.1&nbsp;&nbsp;&nbsp;Notes</h3>
<ul class="simple">
<li>See all questions above (Use Case #4) for metadata operations.</li>
<li>client should be able ask CN for a list of acceptable MNs to upload data
with specific characteristics (e.g., size, institution, theme)</li>
</ul>
</div>
</div>
<div class="section" id="use-case-06-mn-synchronize">
<span id="uc06"></span><h2><a class="toc-backref" href="#id42">3.6&nbsp;&nbsp;&nbsp;Use Case 06 - MN Synchronize</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20090930 Filled out content, changed mode to pull from MN</li>
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>Replicate / synchronize metadata record between Member Node and Coordinating Node.</dd>
</dl>
<p>Summary</p>
<blockquote>
<p>As data packages, or portions there of are created or modified, the metadata
associated with those needs to be replicated to the coordinating nodes.</p>
<p>The presence of new or changed information on a Member Node (MN) is made
known to a Coordinating Node (CN) through the status information in a
<tt class="docutils literal"><span class="pre">ping()</span></tt> response. If so indicated, the CN schedules a synchronization
operation with the MN, a list of changed object GUIDS is retrieved by the
CN, and the CN proceeds to retrieve and process each object identified.</p>
<p>If new data packages are present on the MN, then a MN-MN synchronization
process is scheduled.</p>
</blockquote>
<dl class="docutils">
<dt>Actors</dt>
<dd>Member Node, Coordinating Node</dd>
<dt>Preconditions</dt>
<dd><ul class="first last simple">
<li>Member Node has new or changed data packages</li>
</ul>
</dd>
<dt>Triggers</dt>
<dd><ul class="first last simple">
<li>New or changed content is present on a Member Node</li>
</ul>
</dd>
<dt>Post Conditions</dt>
<dd><ul class="first last simple">
<li>MN is in sync with CN</li>
<li>Log</li>
<li>Watchers for changes to MN, CN, or DataONE system</li>
</ul>
</dd>
</dl>
<p><strong>Notes</strong></p>
<ul class="simple">
<li>Overloading ping() for notification of change seems a little bit of a hack,
though changing the name from ping() to status() makes it seem OK.</li>
</ul>
<div class="figure">
<img alt="UseCases/images/06_uc.png" src="UseCases/images/06_uc.png" />
</div>
<!-- @startuml images/06_uc.png

package "DataONE"
component "Coordinating Node" as CN
component "Member Node" as MN
usecase "13. Authorization" as author
usecase "06. Synchronize Metadata" as SYNC
usecase "XX. Notify Watchers" as NOTIFY
CN - - SYNC
MN - - SYNC
SYNC ..> author: <<includes>>
SYNC ..> NOTIFY: <<includes>>
@enduml -->
<hr class="docutils" />
<div class="figure">
<img alt="UseCases/images/06_interaction.png" src="UseCases/images/06_interaction.png" />
<p class="caption">Synchronize Metadata between Member and Coordinating Node</p>
</div>
<!-- @startuml images/06_interaction.png
participant "CRUD API" as m_crud << Member Node >>
participant "State of Health API" as c_health << Coordinating Node >>
c_health -> m_crud: ping()
activate c_health
  c_health <- - m_crud: [ACK, NewData]
participant "Synchronization API" as c_sync << Coordinating Node >>
  c_health -> c_sync: scheduleSync(MN_ID)
deactivate c_health

participant "Replication API" as m_rep << Member Node >>
c_sync -> m_rep: listChangedRecords()

note right of c_sync
  The RSS mechanism might be
  appropriate for retrieving changes.
end note

c_sync <- - m_rep: GUID_list
loop for each GUID
  c_sync -> m_crud: getMetadata(system_token, GUID)
  c_sync <- - m_crud: metadata
participant "CRUD API" as c_crud << Coordinating Node >>
  c_sync -> c_crud: create(GUID, metadata)
  c_sync <- - c_crud: ack or FAIL
  c_sync -> m_rep: notifyReplicated(system_token, GUID)
  note over m_rep
    What happens if the CN create() operation fails?
  end note
end
@enduml -->
</div>
<div class="section" id="use-case-07-cn-batch-upload">
<span id="uc07"></span><h2><a class="toc-backref" href="#id43">3.7&nbsp;&nbsp;&nbsp;Use Case 07 - CN Batch Upload</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20090930 Flagged as dupe</li>
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>Batch Operations - Coordinating Node requests metadata /data list from new
Member Node and then batch upload (disable indexing for example to improve
insert performance).</dd>
<dt>Summary</dt>
<dd>This is a dupe of <a class="reference internal" href="#uc06">UC06</a> after refactoring that use case use a pull mechanism
to retrieve changed records.</dd>
</dl>
<img alt="UseCases/images/07_interaction.png" src="UseCases/images/07_interaction.png" />
<dl class="docutils">
<dt>Actors</dt>
<dd>xxx</dd>
<dt>Preconditions</dt>
<dd>xxx</dd>
<dt>Triggers</dt>
<dd>xxx</dd>
<dt>Post Conditions</dt>
<dd>xxx</dd>
</dl>
<div class="section" id="id3">
<h3>3.7.1&nbsp;&nbsp;&nbsp;Notes</h3>
<p>xxx</p>
</div>
</div>
<div class="section" id="use-case-08-replication-policy-communication">
<span id="uc08"></span><h2><a class="toc-backref" href="#id44">3.8&nbsp;&nbsp;&nbsp;Use Case 08 - Replication Policy Communication</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>Communication of replication policy metadata between Member Nodes and
Coordinating Nodes.</dd>
</dl>
<p>Summary</p>
<blockquote>
The replication policy of Member Nodes (MN) indicates factors such as the
amount of storage space available, bandwidth constraints, the types of data
and metadata that can be managed, and perhaps access control restrictions.
This information is used by Coordinating Nodes (CN) to balance the
distribution of data packages throughout the DataONE system to achieve the
goals of data package persistence and accessibility.</blockquote>
<dl class="docutils">
<dt>Actors</dt>
<dd>Member Node, Coordinating Node</dd>
<dt>Preconditions</dt>
<dd><ul class="first last simple">
<li>Member Node is registered with a Coordinating Node</li>
<li>Member Node is operational</li>
</ul>
</dd>
<dt>Triggers</dt>
<dd><ul class="first last simple">
<li>A Member Node changes available capacity, bandwidth or some other
operating characteristic</li>
<li>A Member Node changes available services</li>
<li>A Member Node software stack is updated (e.g. new version)</li>
</ul>
</dd>
<dt>Post Conditions</dt>
<dd><ul class="first last simple">
<li>The DataONE system is updated with current state of available resources</li>
<li>Change in replication policy may trigger a re-synchronization (e.g. if
storage capacity shrinks or is enlarged)</li>
<li>Operation is logged</li>
<li>Watchers are notified in change in DataONE system property</li>
</ul>
</dd>
</dl>
<p><strong>Notes</strong></p>
<ul class="simple">
<li>The goal as stated originally for this use case was &quot;Communication of
replication policy metadata among Member Nodes and Coordinating Nodes.&quot;</li>
<li>There should be some restriction on how often replication policy can be
changed to avoid thrashing that might occur for example, if a MN flips
between significant differences in storage capacities (low to high, then low
again).</li>
</ul>
<div class="figure">
<img alt="UseCases/images/08_uc.png" src="UseCases/images/08_uc.png" />
</div>
<!-- @startuml images/08_uc.png
package "DataONE"
  component "Coordinating Node" as CN
  component "Member Node" as MN
  usecase "13. Authorization" as author
  usecase "01. MN Policy" as policy
  usecase "XX. Notify Watchers" as NOTIFY
  usecase "XX. CN Synchronize" as CNSYNC
  CN - - policy
  MN - - policy
  policy ..> author: <<includes>>
  policy ..> NOTIFY: <<includes>>
  policy ..> CNSYNC: <<includes>>
@enduml -->
<hr class="docutils" />
<div class="figure">
<img alt="UseCases/images/08_interaction.png" src="UseCases/images/08_interaction.png" />
<p class="caption">Communication of Replication Policy Metadata</p>
</div>
<!-- @startuml images/08_interaction.png
participant "Replication API" as c_rep << Coordinating Node >>
participant "Replication API" as m_rep << Member Node >>
c_rep -> m_rep: ping()
m_rep - -> c_rep: [ACK, PolicyChange]
m_rep -> c_rep: 1.a. setDefaultReplicationPolicy (system_token, policy)
m_rep -> c_rep: 1.b. setReplicationPolicy (sess, policy, ID)
m_rep -> c_rep: 2.a. getDefaultReplicationPolicy (sess)
m_rep -> c_rep: 2.b. getReplicationPolicy (sess, ID)
c_rep -> m_rep: policy
note right
      Policy:
      Where
      When
      What gets replicated
end note
@enduml -->
</div>
<div class="section" id="use-case-09-replicate-mn-to-mn">
<h2><a class="toc-backref" href="#id45">3.9&nbsp;&nbsp;&nbsp;Use Case 09 - Replicate MN to MN</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20091001 Filled out description a bit more</li>
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>Replicate data from Member Node to Member Node.</dd>
</dl>
<p>Summary</p>
<blockquote>
<p>Replication of content between Member Nodes (MN) is done to improve
persistence of information (avoid data loss with loss of MN) and to improve
accessibility (more choices for content retrieval can lower bandwidth
requirements for any particular MN). The process of replication may be
facilitated by a Coordinating Node (CN), or perhaps only between MNs. The
interaction diagram presented here follows the former notion, where
replication is facilitated by a CN.</p>
<p>A full copy of a data package is made during the replication process, so the
original experiment metadata and data is copied to the recipient MN. An
important question is whether that content is stored in it's original form
(for data this must be the case) or translated into a form that is supported
by the MN (likely to be the case for experiment metadata).</p>
<p>If experiment metadata is translated into a local dialect by a recipient MN,
then it is important that the original metadata is preserved on the CNs, as
it is always possible that the original MN where the content was published
may go offline or be removed from the DataONE system.</p>
</blockquote>
<img alt="UseCases/images/09_interaction.png" src="UseCases/images/09_interaction.png" />
<dl class="docutils">
<dt>Actors</dt>
<dd>Member Node x2, Coordinating Node</dd>
<dt>Preconditions</dt>
<dd><ul class="first last simple">
<li>Content is present on a Member Node</li>
</ul>
</dd>
<dt>Triggers</dt>
<dd><ul class="first last simple">
<li>New data is available on a Member Node</li>
<li>Information on a Member Node is altered</li>
<li>Capabilities of a Member Node changes (accepting more or less content)</li>
<li>Replication policy of DataONE or a Member Node changes</li>
</ul>
</dd>
<dt>Post Conditions</dt>
<dd><ul class="first last simple">
<li>Content is present on one more Member Node</li>
<li>System metadata is updated to reflect the change</li>
<li>Watchers are notified of the change</li>
<li>Member Node and Coordinating Node logs are updated</li>
</ul>
</dd>
</dl>
<div class="section" id="id4">
<h3>3.9.1&nbsp;&nbsp;&nbsp;Notes</h3>
<p>Null.</p>
</div>
</div>
<div class="section" id="use-case-10-mn-status-reports">
<h2><a class="toc-backref" href="#id46">3.10&nbsp;&nbsp;&nbsp;Use Case 10 - MN Status Reports</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>Coordinating Node checks &quot;liveness&quot; of all Member Nodes - checks ping,
service x, load, space, bandwidth, transaction rate, ...</dd>
</dl>
<p>Summary</p>
<blockquote>
xxx</blockquote>
<img alt="UseCases/images/10_interaction.png" src="UseCases/images/10_interaction.png" />
<dl class="docutils">
<dt>Actors</dt>
<dd>xxx</dd>
<dt>Preconditions</dt>
<dd>xxx</dd>
<dt>Triggers</dt>
<dd>xxx</dd>
<dt>Post Conditions</dt>
<dd>xxx</dd>
</dl>
<div class="section" id="id5">
<h3>3.10.1&nbsp;&nbsp;&nbsp;Notes</h3>
<p>xxx</p>
</div>
</div>
<div class="section" id="use-case-11-crud-workflow-objects">
<h2><a class="toc-backref" href="#id47">3.11&nbsp;&nbsp;&nbsp;Use Case 11 - CRUD Workflow Objects</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>Create / update / delete / search workflow objects.</dd>
</dl>
<p>Summary</p>
<blockquote>
xxx</blockquote>
<img alt="UseCases/images/11_interaction.png" src="UseCases/images/11_interaction.png" />
<dl class="docutils">
<dt>Actors</dt>
<dd>xxx</dd>
<dt>Preconditions</dt>
<dd>xxx</dd>
<dt>Triggers</dt>
<dd>xxx</dd>
<dt>Post Conditions</dt>
<dd>xxx</dd>
</dl>
<div class="section" id="id6">
<h3>3.11.1&nbsp;&nbsp;&nbsp;Notes</h3>
<p>xxx</p>
</div>
</div>
<div class="section" id="use-case-12-user-authentication">
<span id="uc12"></span><h2><a class="toc-backref" href="#id48">3.12&nbsp;&nbsp;&nbsp;Use Case 12 - User Authentication</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20091001 Filled out more details</li>
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>User Authentication - Person via client software authenticates against
Identify Provider to establish session token.</dd>
<dt>Summary</dt>
<dd><p class="first">Many operations in the DataONE system require user authentication to ensure
that the user's identity is known to the system, and that appropriate access
controls can be executed based on the identity.</p>
<p>The actual identity and authentication framework may exist outside of
DataONE (one possible example might be the emerging <a class="reference external" href="http://www.cilogon.org/service">CILogon service</a>).</p>
<p class="last">The authentication process might occur using either a Coordinating Node or a
Member Node (if it implements the DataONE authentication API).</p>
</dd>
</dl>
<img alt="UseCases/images/12_interaction.png" src="UseCases/images/12_interaction.png" />
<dl class="docutils">
<dt>Actors</dt>
<dd>User, Member Node, Coordinating Node, Authentication System</dd>
<dt>Preconditions</dt>
<dd><ul class="first last simple">
<li>User is not authenticated in the system</li>
</ul>
</dd>
<dt>Triggers</dt>
<dd><ul class="first last simple">
<li>A user logs on to the DataONE system.</li>
<li>A user tries to perform an operation in the DataONE system that requires
authentication.</li>
</ul>
</dd>
<dt>Post Conditions</dt>
<dd><ul class="first last simple">
<li>An <tt class="docutils literal"><span class="pre">auth_token</span></tt> is returned to the user (application) that can be used
for future interactions with the DataONE system.</li>
<li>In the event of authentication failure, the <tt class="docutils literal"><span class="pre">auth_token</span></tt> will provide
identity equivalent to an anonymous user.</li>
<li>The authentication operation is recorded in MN or CN logs (depending on
where the authentication attempt was made)</li>
</ul>
</dd>
</dl>
<div class="section" id="id7">
<h3>3.12.1&nbsp;&nbsp;&nbsp;Notes</h3>
<ul class="simple">
<li>To be a bit more abstract, it might be good to use something like
login(user, credentials) or login(subject) for the method signature. Here
&quot;subject&quot; would be similar to the <a class="reference external" href="http://java.sun.com/javase/6/docs/api/javax/security/auth/Subject.html">javax.security.auth.Subject</a>
concept. (PEA)</li>
<li>Can logins also happening against a MN, which simply proxies the request up
to the CN? (PEA)</li>
<li>Need to specify a time to live for auth_tokens. Is this part of the
authentication sub-system? If so, can the TTL be altered by the DataONE
system?</li>
</ul>
</div>
</div>
<div class="section" id="use-case-13-user-authorization">
<h2><a class="toc-backref" href="#id49">3.13&nbsp;&nbsp;&nbsp;Use Case 13 - User Authorization</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>User Authorization - Client requests service (get, put, query, delete, ...)
using session token.</dd>
</dl>
<p>Summary</p>
<blockquote>
xxx</blockquote>
<img alt="UseCases/images/13_interaction.png" src="UseCases/images/13_interaction.png" />
<dl class="docutils">
<dt>Actors</dt>
<dd>xxx</dd>
<dt>Preconditions</dt>
<dd>xxx</dd>
<dt>Triggers</dt>
<dd>xxx</dd>
<dt>Post Conditions</dt>
<dd>xxx</dd>
</dl>
<div class="section" id="id8">
<h3>3.13.1&nbsp;&nbsp;&nbsp;Notes</h3>
<ul class="simple">
<li>It would be great to factor out the authentication steps (#1, 2) from the
diagram and replace it with some sort of precondition like &quot;Client has
authentication token.&quot; (PEA)</li>
</ul>
</div>
</div>
<div class="section" id="use-case-14-system-authentication-and-authorization">
<h2><a class="toc-backref" href="#id50">3.14&nbsp;&nbsp;&nbsp;Use Case 14 - System Authentication and Authorization</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>System Authentication/Authorization - Server authenticates and performs
system operations (e.g. replication).</dd>
</dl>
<p>Summary</p>
<blockquote>
xxx</blockquote>
<img alt="UseCases/images/14_interaction.png" src="UseCases/images/14_interaction.png" />
<dl class="docutils">
<dt>Actors</dt>
<dd>xxx</dd>
<dt>Preconditions</dt>
<dd>xxx</dd>
<dt>Triggers</dt>
<dd>xxx</dd>
<dt>Post Conditions</dt>
<dd>xxx</dd>
</dl>
<div class="section" id="id9">
<h3>3.14.1&nbsp;&nbsp;&nbsp;Notes</h3>
<ul class="simple">
<li>I don't understand Step #7. To me the serviceRequest in step #3 is the
actual request for MN-B to do a &quot;system operation&quot;, which kicks off the
verification steps #4 and #5. If this example service request is
replication, then step #3 should point to the replication API, and
internally MN-B decides that it must perform the verify step #4. Then step
#6 is the response to the system operation, and step #7 is not needed. (I
think that this diagram must be showing a kind of pre-approval process for
the operation in step #7, but it doesn't make sense to me because in step
#7, MN-B will just have to re-verify the token again.) (PEA)</li>
</ul>
</div>
</div>
<div class="section" id="use-case-15-account-management">
<h2><a class="toc-backref" href="#id51">3.15&nbsp;&nbsp;&nbsp;Use Case 15 - Account Management</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>User Account Management - Create new user account on Identity Provider (also
edit, delete, ...).</dd>
</dl>
<p>Summary</p>
<blockquote>
xxx</blockquote>
<img alt="UseCases/images/15_interaction.png" src="UseCases/images/15_interaction.png" />
<dl class="docutils">
<dt>Actors</dt>
<dd>xxx</dd>
<dt>Preconditions</dt>
<dd>xxx</dd>
<dt>Triggers</dt>
<dd>xxx</dd>
<dt>Post Conditions</dt>
<dd>xxx</dd>
</dl>
<div class="section" id="id10">
<h3>3.15.1&nbsp;&nbsp;&nbsp;Notes</h3>
<ul class="simple">
<li>This diagram should include a step for email confirmation.</li>
<li>By default, accounts have no real privileges. To get higher privileges,
users may have to jump through more hoops (such as verifying their
association with a project/institution)</li>
<li>Presumably, if we are using external identity providers this user account
management functionality isn't provided by the CN. Right? (PEA)</li>
</ul>
</div>
</div>
<div class="section" id="use-case-16-log-crud-operations">
<h2><a class="toc-backref" href="#id52">3.16&nbsp;&nbsp;&nbsp;Use Case 16 - Log CRUD Operations</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>All CRUD operations on metadata and data are logged at each node.</dd>
</dl>
<p>Summary</p>
<blockquote>
xxx</blockquote>
<img alt="UseCases/images/16_interaction.png" src="UseCases/images/16_interaction.png" />
<dl class="docutils">
<dt>Actors</dt>
<dd>xxx</dd>
<dt>Preconditions</dt>
<dd>xxx</dd>
<dt>Triggers</dt>
<dd>xxx</dd>
<dt>Post Conditions</dt>
<dd>xxx</dd>
</dl>
<div class="section" id="id11">
<h3>3.16.1&nbsp;&nbsp;&nbsp;Notes</h3>
<p>xxx</p>
</div>
</div>
<div class="section" id="use-case-17-crud-logs-aggregated-at-cns">
<h2><a class="toc-backref" href="#id53">3.17&nbsp;&nbsp;&nbsp;Use Case 17 - CRUD Logs Aggregated at CNs</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>All CRUD logs are aggregated at coordinating nodes.</dd>
</dl>
<p>Summary</p>
<blockquote>
xxx</blockquote>
<img alt="UseCases/images/17_interaction.png" src="UseCases/images/17_interaction.png" />
<dl class="docutils">
<dt>Actors</dt>
<dd>xxx</dd>
<dt>Preconditions</dt>
<dd>xxx</dd>
<dt>Triggers</dt>
<dd>xxx</dd>
<dt>Post Conditions</dt>
<dd>xxx</dd>
</dl>
<div class="section" id="id12">
<h3>3.17.1&nbsp;&nbsp;&nbsp;Notes</h3>
<p>xxx</p>
</div>
</div>
<div class="section" id="use-case-18-mn-retrieve-aggregated-logs">
<h2><a class="toc-backref" href="#id54">3.18&nbsp;&nbsp;&nbsp;Use Case 18 - MN Retrieve Aggregated Logs</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>Member nodes can request aggregated CRUD log for {time period/object
id/userid} for all of 'their' objects.</dd>
</dl>
<p>Summary</p>
<blockquote>
xxx</blockquote>
<img alt="UseCases/images/18_interaction.png" src="UseCases/images/18_interaction.png" />
<dl class="docutils">
<dt>Actors</dt>
<dd>xxx</dd>
<dt>Preconditions</dt>
<dd>xxx</dd>
<dt>Triggers</dt>
<dd>xxx</dd>
<dt>Post Conditions</dt>
<dd>xxx</dd>
</dl>
<div class="section" id="id13">
<h3>3.18.1&nbsp;&nbsp;&nbsp;Notes</h3>
<p>xxx</p>
</div>
</div>
<div class="section" id="use-case-19-retrieve-object-download-summary">
<h2><a class="toc-backref" href="#id55">3.19&nbsp;&nbsp;&nbsp;Use Case 19 - Retrieve Object Download Summary</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>General public can request aggregated download usage information by object
id.</dd>
</dl>
<p>Summary</p>
<blockquote>
xxx</blockquote>
<img alt="UseCases/images/19_interaction.png" src="UseCases/images/19_interaction.png" />
<dl class="docutils">
<dt>Actors</dt>
<dd>xxx</dd>
<dt>Preconditions</dt>
<dd>xxx</dd>
<dt>Triggers</dt>
<dd>xxx</dd>
<dt>Post Conditions</dt>
<dd>xxx</dd>
</dl>
<div class="section" id="id14">
<h3>3.19.1&nbsp;&nbsp;&nbsp;Notes</h3>
<p>xxx</p>
</div>
</div>
<div class="section" id="use-case-20-owner-retrieve-aggregate-logs">
<h2><a class="toc-backref" href="#id56">3.20&nbsp;&nbsp;&nbsp;Use Case 20 - Owner Retrieve Aggregate Logs</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>Data owners can request aggregated CRUD log for {time period/object id} for
all of 'their' objects.</dd>
</dl>
<p>Summary</p>
<blockquote>
xxx</blockquote>
<img alt="UseCases/images/20_interaction.png" src="UseCases/images/20_interaction.png" />
<dl class="docutils">
<dt>Actors</dt>
<dd>xxx</dd>
<dt>Preconditions</dt>
<dd>xxx</dd>
<dt>Triggers</dt>
<dd>xxx</dd>
<dt>Post Conditions</dt>
<dd>xxx</dd>
</dl>
<div class="section" id="id15">
<h3>3.20.1&nbsp;&nbsp;&nbsp;Notes</h3>
<p>xxx</p>
</div>
</div>
<div class="section" id="use-case-21-owner-subscribe-to-crud-operations">
<h2><a class="toc-backref" href="#id57">3.21&nbsp;&nbsp;&nbsp;Use Case 21 - Owner Subscribe to CRUD Operations</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>Data owners can subscribe to notification service for CRUD operations for objects they own.</dd>
</dl>
<p>Summary</p>
<blockquote>
xxx</blockquote>
<img alt="UseCases/images/21_interaction.png" src="UseCases/images/21_interaction.png" />
<dl class="docutils">
<dt>Actors</dt>
<dd>xxx</dd>
<dt>Preconditions</dt>
<dd>xxx</dd>
<dt>Triggers</dt>
<dd>xxx</dd>
<dt>Post Conditions</dt>
<dd>xxx</dd>
</dl>
<div class="section" id="id16">
<h3>3.21.1&nbsp;&nbsp;&nbsp;Notes</h3>
<p>xxx</p>
</div>
</div>
<div class="section" id="use-case-22-link-citation-report-for-owner">
<h2><a class="toc-backref" href="#id58">3.22&nbsp;&nbsp;&nbsp;Use Case 22 - Link/Citation Report for Owner</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>User can get report of links/cites my data (also can view this as a referrer
log).</dd>
</dl>
<p>Summary</p>
<blockquote>
xxx</blockquote>
<img alt="UseCases/images/22_interaction.png" src="UseCases/images/22_interaction.png" />
<dl class="docutils">
<dt>Actors</dt>
<dd>xxx</dd>
<dt>Preconditions</dt>
<dd>xxx</dd>
<dt>Triggers</dt>
<dd>xxx</dd>
<dt>Post Conditions</dt>
<dd>xxx</dd>
</dl>
<div class="section" id="id17">
<h3>3.22.1&nbsp;&nbsp;&nbsp;Notes</h3>
<p>xxx</p>
</div>
</div>
<div class="section" id="use-case-23-owner-expunge-content">
<h2><a class="toc-backref" href="#id59">3.23&nbsp;&nbsp;&nbsp;Use Case 23 - Owner Expunge Content</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>User can find out where all copies of my data are in the system and can
expunge them.</dd>
</dl>
<p>Summary</p>
<blockquote>
xxx</blockquote>
<img alt="UseCases/images/23_interaction.png" src="UseCases/images/23_interaction.png" />
<dl class="docutils">
<dt>Actors</dt>
<dd>xxx</dd>
<dt>Preconditions</dt>
<dd>xxx</dd>
<dt>Triggers</dt>
<dd>xxx</dd>
<dt>Post Conditions</dt>
<dd>xxx</dd>
</dl>
<div class="section" id="id18">
<h3>3.23.1&nbsp;&nbsp;&nbsp;Notes</h3>
<ul class="simple">
<li>Dealing with inappropriate usage of (ie, copyrighted objects that are
stored)</li>
</ul>
</div>
</div>
<div class="section" id="use-case-24-mns-and-cns-support-transactions">
<h2><a class="toc-backref" href="#id60">3.24&nbsp;&nbsp;&nbsp;Use Case 24 - MNs and CNs Support Transactions</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>Transactions - CNs and MNs should support transaction sets where operations
all complete successfully or get rolled back (e.g., upload both data and
metadata records).</dd>
</dl>
<p>Summary</p>
<blockquote>
xxx</blockquote>
<img alt="UseCases/images/24_interaction.png" src="UseCases/images/24_interaction.png" />
<dl class="docutils">
<dt>Actors</dt>
<dd>xxx</dd>
<dt>Preconditions</dt>
<dd>xxx</dd>
<dt>Triggers</dt>
<dd>xxx</dd>
<dt>Post Conditions</dt>
<dd>xxx</dd>
</dl>
<div class="section" id="id19">
<h3>3.24.1&nbsp;&nbsp;&nbsp;Notes</h3>
<ul class="simple">
<li>Does this include just one service, or sets of services that can be included
in a transaction?</li>
<li>Can transactions span multiple MNs? MNs and CNs?</li>
</ul>
</div>
</div>
<div class="section" id="use-case-25-detect-damaged-content">
<h2><a class="toc-backref" href="#id61">3.25&nbsp;&nbsp;&nbsp;Use Case 25 - Detect Damaged Content</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>System should scans for damaged/defaced data and metadata using some
validation process.</dd>
</dl>
<p>Summary</p>
<blockquote>
xxx</blockquote>
<img alt="UseCases/images/25_interaction.png" src="UseCases/images/25_interaction.png" />
<dl class="docutils">
<dt>Actors</dt>
<dd>xxx</dd>
<dt>Preconditions</dt>
<dd>xxx</dd>
<dt>Triggers</dt>
<dd>xxx</dd>
<dt>Post Conditions</dt>
<dd>xxx</dd>
</dl>
<div class="section" id="id20">
<h3>3.25.1&nbsp;&nbsp;&nbsp;Notes</h3>
<p>xxx</p>
</div>
</div>
<div class="section" id="use-case-26-data-quality-checks">
<h2><a class="toc-backref" href="#id62">3.26&nbsp;&nbsp;&nbsp;Use Case 26 - Data Quality Checks</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>System performs data quality checks on data.</dd>
</dl>
<p>Summary</p>
<blockquote>
xxx</blockquote>
<img alt="UseCases/images/26_interaction.png" src="UseCases/images/26_interaction.png" />
<dl class="docutils">
<dt>Actors</dt>
<dd>xxx</dd>
<dt>Preconditions</dt>
<dd>xxx</dd>
<dt>Triggers</dt>
<dd>xxx</dd>
<dt>Post Conditions</dt>
<dd>xxx</dd>
</dl>
<div class="section" id="id21">
<h3>3.26.1&nbsp;&nbsp;&nbsp;Notes</h3>
<ul class="simple">
<li>Is this more for verifying the quality of metadata? Otherwise how does it
differ from #25?</li>
</ul>
</div>
</div>
<div class="section" id="use-case-27-metadata-version-migration">
<h2><a class="toc-backref" href="#id63">3.27&nbsp;&nbsp;&nbsp;Use Case 27 - Metadata Version Migration</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>CN should support forward migration of metadata documents from one version
to another within a standard and to other standards.</dd>
</dl>
<p>Summary</p>
<blockquote>
xxx</blockquote>
<img alt="UseCases/images/27_interaction.png" src="UseCases/images/27_interaction.png" />
<dl class="docutils">
<dt>Actors</dt>
<dd>xxx</dd>
<dt>Preconditions</dt>
<dd>xxx</dd>
<dt>Triggers</dt>
<dd>xxx</dd>
<dt>Post Conditions</dt>
<dd>xxx</dd>
</dl>
<div class="section" id="id22">
<h3>3.27.1&nbsp;&nbsp;&nbsp;Notes</h3>
<ul class="simple">
<li>Should this apply to data as well?</li>
</ul>
</div>
</div>
<div class="section" id="use-case-28-derived-product-original-change-notification">
<h2><a class="toc-backref" href="#id64">3.28&nbsp;&nbsp;&nbsp;Use Case 28 - Derived Product Original Change Notification</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>Relationships/Versioning - Derived products should be linked to source
objects so that notifications can be made to users of derived products when
source products change.</dd>
</dl>
<p>Summary</p>
<blockquote>
xxx</blockquote>
<img alt="UseCases/images/28_interaction.png" src="UseCases/images/28_interaction.png" />
<dl class="docutils">
<dt>Actors</dt>
<dd>xxx</dd>
<dt>Preconditions</dt>
<dd>xxx</dd>
<dt>Triggers</dt>
<dd>xxx</dd>
<dt>Post Conditions</dt>
<dd>xxx</dd>
</dl>
<div class="section" id="id23">
<h3>3.28.1&nbsp;&nbsp;&nbsp;Notes</h3>
<ul class="simple">
<li>Who can assert these relationships? The relevant object owners? Anybody?</li>
<li>How are relationships removed?</li>
</ul>
</div>
</div>
<div class="section" id="use-case-29-cn-load-balancing">
<h2><a class="toc-backref" href="#id65">3.29&nbsp;&nbsp;&nbsp;Use Case 29 - CN Load Balancing</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>Load Balancing - Requests to coordinating nodes are load balanced.</dd>
</dl>
<p>Summary</p>
<blockquote>
xxx</blockquote>
<img alt="UseCases/images/29_interaction.png" src="UseCases/images/29_interaction.png" />
<dl class="docutils">
<dt>Actors</dt>
<dd>xxx</dd>
<dt>Preconditions</dt>
<dd>xxx</dd>
<dt>Triggers</dt>
<dd>xxx</dd>
<dt>Post Conditions</dt>
<dd>xxx</dd>
</dl>
<div class="section" id="id24">
<h3>3.29.1&nbsp;&nbsp;&nbsp;Notes</h3>
<p>xxx</p>
</div>
</div>
<div class="section" id="use-case-30-mn-outage-notification">
<h2><a class="toc-backref" href="#id66">3.30&nbsp;&nbsp;&nbsp;Use Case 30 - MN Outage Notification</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>MN can notify CN about pending outages, severity, and duration, and CNs may
want to act on that knowledge to maintain seamless operation.</dd>
</dl>
<p>Summary</p>
<blockquote>
xxx</blockquote>
<img alt="UseCases/images/30_interaction.png" src="UseCases/images/30_interaction.png" />
<dl class="docutils">
<dt>Actors</dt>
<dd>xxx</dd>
<dt>Preconditions</dt>
<dd>xxx</dd>
<dt>Triggers</dt>
<dd>xxx</dd>
<dt>Post Conditions</dt>
<dd>xxx</dd>
</dl>
<div class="section" id="id25">
<h3>3.30.1&nbsp;&nbsp;&nbsp;Notes</h3>
<p>xxx</p>
</div>
</div>
<div class="section" id="use-case-31-manage-access-policies">
<h2><a class="toc-backref" href="#id67">3.31&nbsp;&nbsp;&nbsp;Use Case 31 - Manage Access Policies</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>Manage Access Policies - Client can specify access restrictions for their
data and metadata objects. Also supports release time embargoes.</dd>
</dl>
<p>Summary</p>
<blockquote>
xxx</blockquote>
<img alt="UseCases/images/31_interaction.png" src="UseCases/images/31_interaction.png" />
<dl class="docutils">
<dt>Actors</dt>
<dd>xxx</dd>
<dt>Preconditions</dt>
<dd>xxx</dd>
<dt>Triggers</dt>
<dd>xxx</dd>
<dt>Post Conditions</dt>
<dd>xxx</dd>
</dl>
<div class="section" id="id26">
<h3>3.31.1&nbsp;&nbsp;&nbsp;Notes</h3>
<ul class="simple">
<li>Users can be members of groups that can participate in access directives.</li>
<li>I have removed the phrase &quot;and replication&quot; from the use case statement
because use case #8 deals with setting replication policies. (PEA)</li>
<li>Step #1, should have a signature of setAccess(token, GUID, accessPolicy).
Even though the diagram says &quot;Assume user authority for specifying
restrictions&quot;, practically speaking we will need to verify that authority
and the user's identify with a token. Also &quot;accessLevel&quot; sounds very
limited, and access policy implies a possibly more sophisticated access
policy delineation, including embargoes.</li>
</ul>
</div>
</div>
<div class="section" id="use-case-32-transfer-object-ownership">
<h2><a class="toc-backref" href="#id68">3.32&nbsp;&nbsp;&nbsp;Use Case 32 - Transfer Object Ownership</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>User or organization takes over 'ownership' of a set of objects (write
access for orphaned records)</dd>
</dl>
<p>Summary</p>
<blockquote>
xxx</blockquote>
<img alt="UseCases/images/32_interaction.png" src="UseCases/images/32_interaction.png" />
<dl class="docutils">
<dt>Actors</dt>
<dd>xxx</dd>
<dt>Preconditions</dt>
<dd>xxx</dd>
<dt>Triggers</dt>
<dd>xxx</dd>
<dt>Post Conditions</dt>
<dd>xxx</dd>
</dl>
<div class="section" id="id27">
<h3>3.32.1&nbsp;&nbsp;&nbsp;Notes</h3>
<ul class="simple">
<li>Is there an authority for any given data/metadata object?</li>
</ul>
</div>
</div>
<div class="section" id="use-case-33-search-for-data">
<h2><a class="toc-backref" href="#id69">3.33&nbsp;&nbsp;&nbsp;Use Case 33 - Search for Data</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>Clients should be able to search for data using CN metadata catalogs.</dd>
</dl>
<p>Summary</p>
<blockquote>
xxx</blockquote>
<img alt="UseCases/images/33_interaction.png" src="UseCases/images/33_interaction.png" />
<dl class="docutils">
<dt>Actors</dt>
<dd>xxx</dd>
<dt>Preconditions</dt>
<dd>xxx</dd>
<dt>Triggers</dt>
<dd>xxx</dd>
<dt>Post Conditions</dt>
<dd>xxx</dd>
</dl>
<div class="section" id="id28">
<h3>3.33.1&nbsp;&nbsp;&nbsp;Notes</h3>
<p>xxx</p>
</div>
</div>
<div class="section" id="use-case-34-cns-support-other-discovery-mechanisms-e-g-google">
<h2><a class="toc-backref" href="#id70">3.34&nbsp;&nbsp;&nbsp;Use Case 34 - CNs Support Other Discovery Mechanisms (e.g. Google)</a></h2>
<dl class="docutils">
<dt>Author</dt>
<dd>VDC TWG</dd>
<dt>Date</dt>
<dd><ul class="first last simple">
<li>20090925 Adding to use case description and documentation</li>
<li>20090114 (TWG meeting).  Subsequent various modifications.</li>
</ul>
</dd>
<dt>Version</dt>
<dd>Draft</dd>
<dt>Goal</dt>
<dd>Coordinating Nodes publish metadata in formats for other discovery services
like Google/Libraries/GCMD/etc.</dd>
</dl>
<p>Summary</p>
<blockquote>
xxx</blockquote>
<img alt="UseCases/images/34_interaction.png" src="UseCases/images/34_interaction.png" />
<dl class="docutils">
<dt>Actors</dt>
<dd>xxx</dd>
<dt>Preconditions</dt>
<dd>xxx</dd>
<dt>Triggers</dt>
<dd>xxx</dd>
<dt>Post Conditions</dt>
<dd>xxx</dd>
</dl>
<div class="section" id="id29">
<h3>3.34.1&nbsp;&nbsp;&nbsp;Notes</h3>
<p>xxx</p>
</div>
</div>
</div>
<div class="section" id="dataone-application-programming-interfaces">
<h1><a class="toc-backref" href="#id36">4&nbsp;&nbsp;&nbsp;DataONE Application Programming Interfaces</a></h1>
<p>isAuthorized (sess, transID)
read (ID, sess, transID)</p>
<div class="section" id="member-node-apis">
<h2>4.1&nbsp;&nbsp;&nbsp;Member Node APIs</h2>
<p>These APIs are implemented by Member Nodes.</p>
<div class="section" id="authorization-api">
<h3>4.1.1&nbsp;&nbsp;&nbsp;Authorization API</h3>
<p>Provides a mechanism for a User to authenticate themselves with the DataONE
system and verify that an operation is permitted for an authenticated User.</p>
<pre class="literal-block">
login (user, pw)
isAuth (token, GUID)
</pre>
<table border="1" class="docutils">
<caption>Methods</caption>
<colgroup>
<col width="20%" />
<col width="5%" />
<col width="10%" />
<col width="20%" />
<col width="45%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Path</th>
<th class="head">Parameters</th>
<th class="head">Method</th>
<th class="head">Returns</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="docutils literal"><span class="pre">/login/</span></tt></td>
<td><tt class="docutils literal"><span class="pre">POST</span></tt></td>
<td><tt class="docutils literal"><span class="pre">user</span></tt>, <tt class="docutils literal"><span class="pre">password</span></tt></td>
<td><tt class="docutils literal"><span class="pre">auth_token</span></tt> or FAIL</td>
<td>Authenticates a user. The returned value is a composite of the user id
and authentication token</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">/&lt;GUID&gt;/isAuth/</span></tt></td>
<td><tt class="docutils literal"><span class="pre">GET</span></tt></td>
<td><tt class="docutils literal"><span class="pre">auth_token</span></tt>, <tt class="docutils literal"><span class="pre">GUID</span></tt></td>
<td>permissions</td>
<td>The token is passed in the HTTP authorization header. Permissions are
returned as a set of flags (can read, can write)?</td>
</tr>
</tbody>
</table>
<div class="note">
<p class="first admonition-title">Note</p>
<p class="last">Should add a mechanism for logging out, and perhaps convenience methods for
&quot;canRead()&quot; and &quot;canWrite()&quot; to verify that a user is able to read / write
an object</p>
</div>
</div>
<div class="section" id="crud-api">
<h3>4.1.2&nbsp;&nbsp;&nbsp;CRUD API</h3>
<pre class="literal-block">
batchGet (objectsList)
checkDataQuality (GUID)
create (token, dataPackage)
create (token, workflowObject)
get (token, handle)
getChecksum (GUID)
getLogRecords (fromDate, toDate)
log (create, creationDate, ID)
register (memberToken, ID, metadata)
</pre>
</div>
<div class="section" id="replication-api">
<h3>4.1.3&nbsp;&nbsp;&nbsp;Replication API</h3>
<pre class="literal-block">
cancelReplication (sess, transID)
listAllObjects ()
listRecords ()
replicationSucceeds (transID)
startReplica (ID, sessionID, transID, srcMN)
sysOp (token)
</pre>
</div>
<div class="section" id="server-authentication-api">
<h3>4.1.4&nbsp;&nbsp;&nbsp;Server Authentication API</h3>
</div>
<div class="section" id="capabilities-api">
<h3>4.1.5&nbsp;&nbsp;&nbsp;Capabilities API</h3>
<pre class="literal-block">
serviceRequest (token)
verify (token)
getCapabilities ()
State of Health API
sohQuery (token, service)
</pre>
</div>
</div>
<div class="section" id="coordinating-node-apis">
<h2>4.2&nbsp;&nbsp;&nbsp;Coordinating Node APIs</h2>
<div class="section" id="authentication-api">
<h3>4.2.1&nbsp;&nbsp;&nbsp;Authentication API</h3>
<pre class="literal-block">
login (user, pw)
requestToken ()
newAccount (user, pw)
</pre>
</div>
<div class="section" id="verify-api">
<h3>4.2.2&nbsp;&nbsp;&nbsp;Verify API</h3>
<pre class="literal-block">
isValidToken (token)
Authorization API
isAuth (token, GUID)
isAuth (token, resultset)
isValidToken (token)
setAccess (GUID, accessLevel)
takeOwnership (objectList)
</pre>
</div>
<div class="section" id="query-api">
<h3>4.2.3&nbsp;&nbsp;&nbsp;Query API</h3>
<pre class="literal-block">
getAllCopies (token, ownerID)
getLinksAndCites (GUID, fromDate, toDate)
getLogRecords (GUID, fromDate, toDate)
getLogRecords (nodeID, fromDate, toDate)
query (token, query)
searchForData ()
usageQuery (token, GUID)
</pre>
</div>
<div class="section" id="id30">
<h3>4.2.4&nbsp;&nbsp;&nbsp;CRUD API</h3>
<pre class="literal-block">
assertRelation (token, IDofSubject, relationship, IDofObject)
batchWrite (objectsList)
deleteRecords (token, listOfGUIDs)
get (token, GUID)
register (memberToken, ID, metadata)
resolve (GUID, token)
storeRecords ()
write ()
</pre>
</div>
<div class="section" id="id31">
<h3>4.2.5&nbsp;&nbsp;&nbsp;Replication API</h3>
<pre class="literal-block">
getDefaultReplicationPolicy (sess)
getMNReplicateList ()
getReplicationPolicy (sess, ID)
isReplicationNeeded ()
replicateMetadata ()
setDefaultReplicationPolicy (sess, policy)
setReplicationPolicy (sess, policy, ID)
</pre>
</div>
<div class="section" id="synchronization-api">
<h3>4.2.6&nbsp;&nbsp;&nbsp;Synchronization API</h3>
<pre class="literal-block">
pollForNewIDs ()
synchronize ()
verifyAllRecordsReceived ()
</pre>
</div>
<div class="section" id="register-api">
<h3>4.2.7&nbsp;&nbsp;&nbsp;Register API</h3>
<pre class="literal-block">
addNodeCapabilities ()
register (token, capabilitiesURL)
registerForNotification (token, dataOwnerID)
scheduleSynch ()
verifyCapabilities ()
</pre>
</div>
<div class="section" id="id32">
<h3>4.2.8&nbsp;&nbsp;&nbsp;Server Authentication API</h3>
</div>
<div class="section" id="state-of-health-api">
<h3>4.2.9&nbsp;&nbsp;&nbsp;State of Health API</h3>
<pre class="literal-block">
actOnPendingEvent (event)
reportPendingEvent (event)
Admin Application
notify (adminID, nodeID, service)
</pre>
<!-- This document is formatted using reStructured Text, a plain text
format that can be used to generate various renderings including HTML and
PDF, assuming you have installed docutils and rst2pdf (Google is your
friend)
To generate a HTML version of this document:
  rst2html.py Architecture.txt Architecture.html
To generate a PDF version:
  rst2pdf - -default-dpi 100 Architecture.txt
Or use the included ant build.xml -->
</div>
</div>
</div>
</div>
<div class="footer">
<hr class="footer" />
<p>###Section###  -  ###Page###</p>
<p>Generated on: 20091020 03:31-0700.
Generated by <a class="reference external" href="http://docutils.sourceforge.net/">Docutils</a> from <a class="reference external" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> source.
</p>

</div>
</body>
</html>
