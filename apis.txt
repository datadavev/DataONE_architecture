DataONE Application Programming Interfaces
==========================================


isAuthorized (sess, transID)
read (ID, sess, transID)

Member Node APIs
----------------

These APIs are implemented by Member Nodes.

Authorization API
~~~~~~~~~~~~~~~~~

Provides a mechanism for a User to authenticate themselves with the DataONE
system and verify that an operation is permitted for an authenticated User.

::

  login (user, pw)
  isAuth (token, GUID)
  
.. list-table:: Methods
   :widths: 20 5 10 20 45
   :header-rows: 1
   
   * - Path
     - Parameters
     - Method
     - Returns
     - Description

   * - ``/login/``
     - ``POST``
     - ``user``, ``password``
     - ``auth_token`` or FAIL
     - Authenticates a user. The returned value is a composite of the user id
       and authentication token

   * - ``/<GUID>/isAuth/``
     - ``GET``
     - ``auth_token``, ``GUID``
     - permissions 
     - The token is passed in the HTTP authorization header. Permissions are
       returned as a set of flags (can read, can write)?
       
.. Note::
   Should add a mechanism for logging out, and perhaps convenience methods for
   "canRead()" and "canWrite()" to verify that a user is able to read / write
   an object


CRUD API
~~~~~~~~

::

  batchGet (objectsList)
  checkDataQuality (GUID)
  create (token, dataPackage)
  create (token, workflowObject)
  get (token, handle)
  getChecksum (GUID)
  getLogRecords (fromDate, toDate)
  log (create, creationDate, ID)
  register (memberToken, ID, metadata)

Replication API
~~~~~~~~~~~~~~~

::

  cancelReplication (sess, transID)
  listAllObjects ()
  listRecords ()
  replicationSucceeds (transID)
  startReplica (ID, sessionID, transID, srcMN)
  sysOp (token)

Server Authentication API
~~~~~~~~~~~~~~~~~~~~~~~~~

Capabilities API
~~~~~~~~~~~~~~~~

::

  serviceRequest (token)
  verify (token)
  getCapabilities ()
  State of Health API
  sohQuery (token, service)
  
Coordinating Node APIs
----------------------

Authentication API
~~~~~~~~~~~~~~~~~~

::

  login (user, pw)
  requestToken ()
  newAccount (user, pw)

Verify API
~~~~~~~~~~

::

  isValidToken (token)
  Authorization API
  isAuth (token, GUID)
  isAuth (token, resultset)
  isValidToken (token)
  setAccess (GUID, accessLevel)
  takeOwnership (objectList)

Query API
~~~~~~~~~

::

  getAllCopies (token, ownerID)
  getLinksAndCites (GUID, fromDate, toDate)
  getLogRecords (GUID, fromDate, toDate)
  getLogRecords (nodeID, fromDate, toDate)
  query (token, query)
  searchForData ()
  usageQuery (token, GUID)

CRUD API
~~~~~~~~

::

  assertRelation (token, IDofSubject, relationship, IDofObject)
  batchWrite (objectsList)
  deleteRecords (token, listOfGUIDs)
  get (token, GUID)
  register (memberToken, ID, metadata)
  resolve (GUID, token)
  storeRecords ()
  write ()

Replication API
~~~~~~~~~~~~~~~

::

  getDefaultReplicationPolicy (sess)
  getMNReplicateList ()
  getReplicationPolicy (sess, ID)
  isReplicationNeeded ()
  replicateMetadata ()
  setDefaultReplicationPolicy (sess, policy)
  setReplicationPolicy (sess, policy, ID)

Synchronization API
~~~~~~~~~~~~~~~~~~~

::

  pollForNewIDs ()
  synchronize ()
  verifyAllRecordsReceived ()
  
Register API
~~~~~~~~~~~~

::

  addNodeCapabilities ()
  register (token, capabilitiesURL)
  registerForNotification (token, dataOwnerID)
  scheduleSynch ()
  verifyCapabilities ()

Server Authentication API
~~~~~~~~~~~~~~~~~~~~~~~~~

State of Health API
~~~~~~~~~~~~~~~~~~~

::

  actOnPendingEvent (event)
  reportPendingEvent (event)
  Admin Application
  notify (adminID, nodeID, service)

