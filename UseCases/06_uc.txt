.. _UC06:

Use Case 06 - MN Synchronize
----------------------------

Author
  VDC TWG

Date
  - 20090930 Filled out content, changed mode to pull from MN
  - 20090925 Adding to use case description and documentation
  - 20090114 (TWG meeting).  Subsequent various modifications.

Version 
  Draft

Goal
  Replicate / synchronize metadata record between Member Node and Coordinating Node.

Summary 

  As data packages, or portions there of are created or modified, the metadata
  associated with those needs to be replicated to the coordinating nodes.

  The presence of new or changed information on a Member Node (MN) is made
  known to a Coordinating Node (CN) through the status information in a
  ``ping()`` response. If so indicated, the CN schedules a synchronization
  operation with the MN, a list of changed object GUIDS is retrieved by the
  CN, and the CN proceeds to retrieve and process each object identified.

  If new data packages are present on the MN, then a MN-MN synchronization
  process is scheduled.


.. image:: UseCases/images/06_interaction.png


Actors
  Member Node, Coordinating Node

Preconditions 
  - Member Node has new or changed data packages
  
Triggers
  - New or changed content is present on a Member Node
 
Post Conditions
  - MN is in sync with CN

  - Log

  - Watchers for changes to MN, CN, or DataONE system

Notes
~~~~~

- Overloading ping() for notification of change seems a little bit of a hack,
  though changing the name from ping() to status() makes it seem OK.
